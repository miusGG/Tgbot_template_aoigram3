# <PYTHON> Telegram Bot Template (aiogram 3+)

## Описание проекта

Этот шаблон предоставляет структурированную основу для создания Telegram ботов на Python с использованием aiogram 3+. Шаблон включает:

- Четкое разделение на модули и пакеты
- Использование датаклассов для конфигурации
- Систему широковещательных сообщений (broadcaster)
- Централизованное хранение текстов
- Гибкую систему управления правами администраторов

## Структура проекта

```
tgbot/
├── filters/              # Фильтры для хэндлеров
│   ├── __init__.py
│   └── admin.py
├── handlers/             # Обработчики сообщений
│   ├── __init__.py
│   ├── admin.py          # Админские команды
│   └── user.py           # Пользовательские команды
├── keyboards/            # Клавиатуры
│   ├── __init__.py
│   ├── inline.py         # Inline-клавиатуры
│   └── reply.py          # Reply-клавиатуры
├── middlewares/          # Мидлвари
│   └── __init__.py
├── services/             # Сервисы
│   ├── __init__.py
│   ├── broadcaster.py    # Широковещательные сообщения
│   └── texts.py          # Тексты бота
├── __init__.py
├── config.py             # Конфигурация бота
├── сfg.json              # Файл для токена и id админов
└── bot.py                # Основной файл бота
```

## Начало работы

### Установка зависимостей

```bash
pip install -r requirements.txt
```

### Настройка конфигурации

1. Редактируйте файл `cfg.json` в корне проекта
2. Заполните его по образцу:

```ini
{
  "main": {
    "BOT_TOKEN": "",
    "ADMINS": [
      000000000 #id админов через запятую
    ]
  }
}
```

### Запуск бота

```bash
python bot.py
```

## Особенности шаблона

### Конфигурация

Все настройки бота хранятся в датаклассе `Config` (`tgbot/config.py`), который автоматически загружает данные из `cfg.json` файла.

### Тексты бота

Все текстовые сообщения бота хранятся в `services/texts.py` в функциях, что позволяет легко их редактировать и локализовать.

### Широковещательные сообщения

Сервис `broadcaster.py` позволяет отправлять сообщения всем пользователям бота или определенным группам пользователей.

### Клавиатуры

- `keyboards/reply.py` - обычные клавиатуры под полем ввода
- `keyboards/inline.py` - inline-клавиатуры в сообщениях

## Разработка

### Добавление новых команд

1. Создайте новый обработчик в `handlers/`
2. Присоедините клавиатуру в `keyboards/`
3. Зарегистрируйте его в `handlers/__init__.py`

### Добавление новых фильтров

1. Создайте новый фильтр в `filters/`
2. Импортируйте и используйте его в нужных обработчиках
